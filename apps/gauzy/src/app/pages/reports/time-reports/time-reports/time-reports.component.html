<div class="row">
	<div
		class="col-sm-4 col-md-3 col-lg"
		*ngxPermissionsOnly="PermissionsEnum.CHANGE_SELECTED_EMPLOYEE"
	>
		<nb-card
			[nbSpinner]="countsLoading"
			nbSpinnerSize="giant"
			nbSpinnerStatus="primary"
		>
			<nb-card-body>
				<p>
					{{ 'TIMESHEET.MEMBERS_WORKED' | translate }}
				</p>
				<div class="h1">
					{{ counts?.employeesCount || 0 }}
				</div>
			</nb-card-body>
		</nb-card>
	</div>
	<div class="col-sm-4 col-md-3 col-lg">
		<nb-card
			[nbSpinner]="countsLoading"
			nbSpinnerSize="giant"
			nbSpinnerStatus="primary"
		>
			<nb-card-body>
				<p>
					{{ 'TIMESHEET.PROJECTS_WORKED' | translate }}
				</p>
				<div class="h1">
					{{ counts?.projectsCount || 0 }}
				</div>
			</nb-card-body>
		</nb-card>
	</div>
	<div class="col-sm-4 col-md-3 col-lg">
		<nb-card
			[nbSpinner]="countsLoading"
			nbSpinnerSize="giant"
			nbSpinnerStatus="primary"
		>
			<nb-card-body>
				<p>
					{{ 'TIMESHEET.WEEKLY_ACTIVITY' | translate }}
				</p>
				<div class="h1">{{ counts?.weekActivities || 0 }}%</div>
			</nb-card-body>
		</nb-card>
	</div>
	<div class="col-sm-4 col-md-3 col-lg">
		<nb-card
			[nbSpinner]="countsLoading"
			nbSpinnerSize="giant"
			nbSpinnerStatus="primary"
		>
			<nb-card-body>
				<p>
					{{ 'TIMESHEET.WORKED_THIS_WEEK' | translate }}
				</p>
				<div class="h1">
					{{ counts?.weekDuration || 0 | durationFormat }}
				</div>
			</nb-card-body>
		</nb-card>
	</div>
	<div class="col-sm-4 col-md-3 col-lg">
		<nb-card
			[nbSpinner]="countsLoading"
			nbSpinnerSize="giant"
			nbSpinnerStatus="primary"
		>
			<nb-card-body>
				<p>
					{{ 'TIMESHEET.TODAY_ACTIVITY' | translate }}
				</p>
				<div class="h1">{{ counts?.todayActivities || 0 }}%</div>
			</nb-card-body>
		</nb-card>
	</div>
	<div class="col-sm-4 col-md-3 col-lg">
		<nb-card
			[nbSpinner]="countsLoading"
			nbSpinnerSize="giant"
			nbSpinnerStatus="primary"
		>
			<nb-card-body>
				<p>
					{{ 'TIMESHEET.WORKED_TODAY' | translate }}
				</p>
				<div class="h1">
					{{ counts?.todayDuration || 0 | durationFormat }}
				</div>
			</nb-card-body>
		</nb-card>
	</div>
</div>
<div class="daily-time-report my-3">
	<gauzy-time-report-horizontal-bar-chart></gauzy-time-report-horizontal-bar-chart>
</div>
<div class="table">
	<div
		class="weekly-logs row-table"
		[nbSpinner]="loading"
		nbSpinnerSize="giant"
		nbSpinnerStatus="primary"
	>
		<div
			class="row border-bottom border-top py-3 font-weight-bold align-items-center"
		>
			<div class="col-sm-3 project-name">
				{{ 'Project' | translate }}
			</div>
			<div class="col-sm-3 project-name">
				{{ 'TIMESHEET.EMPLOYEE' | translate }}
			</div>
			<div class="col text-center day-col">To-dos</div>
			<div class="col text-center day-col">Time</div>
			<div class="col text-center day-col">Activity</div>
		</div>
		<ng-template [ngIf]="dailyData?.length > 0" [ngIfElse]="notFound">
			<nb-card class="card" *ngFor="let day of dailyData">
				<nb-card-header class="card-title">{{
					day.date
				}}</nb-card-header>
				<nb-card-body
					class="cart-body project-row"
					*ngFor="let logs of day.logs"
				>
					<div
						class="employee-row"
						*ngFor="let projectLog of logs.projectLogs"
					>
						<div class="row py-3 align-items-center">
							<div class="col-sm-3 project-name">
								{{ logs.project.name }}
							</div>
							<div class="col-sm-3 project-name">
								<ngx-avatar
									[src]="projectLog?.employee?.user?.imageUrl"
									[name]="projectLog?.employee?.user?.name"
								></ngx-avatar>
								<ng-template #noProjects>
									<span>{{
										'TIMESHEET.NO_EMPLOYEE' | translate
									}}</span>
								</ng-template>
							</div>
							<div class="col text-center day-col">
								{{ projectLog.sum }}
							</div>
							<div class="col text-center day-col">
								{{ projectLog.activity }}
							</div>
						</div>
					</div>
				</nb-card-body>
			</nb-card>
		</ng-template>
		<ng-template #notFound>
			<div class="row font-weight-bold py-3 align-items-center">
				<div class="col text-center">
					{{ 'TIMESHEET.NO_TIMELOG' | translate }}
				</div>
			</div>
		</ng-template>
	</div>
</div>
