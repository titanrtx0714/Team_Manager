<nb-layout windowMode>
	<nb-layout-header fixed *ngIf="user">
		<ngx-header [expanded]="isExpanded"></ngx-header>
	</nb-layout-header>

	<nb-sidebar state="compacted" tag="user-workspace">
		<div><gauzy-workspaces></gauzy-workspaces></div>
		<gauzy-user [user]="user" (click)="isOpen = !isOpen"></gauzy-user>
	</nb-sidebar>
	<nb-sidebar
		class="menu-sidebar sidebar_class"
		tag="menu-sidebar"
		*ngIf="user"
	>
		<div
			[ngClass]="isExpanded? isCollapse? 'logo-container':'logo-container not-collapsed' : 'logo-container compacted'"
		>
			<ngx-gauzy-logo (onCollapsed)="onCollapse($event)"></ngx-gauzy-logo>
			<button *ngIf="isCollapse" class="hidden-menu" outline nbButton>
				<i class="fas fa-ellipsis-h"></i>
			</button>
		</div>
		<ng-content select="nb-menu"></ng-content>
		<button
			(click)="toggle()"
			nbButton
			[ngClass]="isExpanded ? 'chevron': 'chevron collapsed'"
			outline
			size="small"
		>
			<i
				[ngClass]="isExpanded? 'fas fa-angle-double-left':'fas fa-angle-double-right'"
			></i>
		</button>
	</nb-sidebar>
	<nb-layout-column *ngIf="!loading">
		<ng-content select="router-outlet"></ng-content>
	</nb-layout-column>

	<nb-layout-footer fixed>
		<ngx-footer></ngx-footer>
	</nb-layout-footer>

	<nb-sidebar
		*ngFor="let sidebar of (navigationBuilderService.sidebars$ | async)"
		[class]="sidebar.class"
		[tag]="sidebar.id"
		state="collapsed"
		fixed
		[end]="true"
	>
		<ngx-theme-sidebar [config]="sidebar"></ngx-theme-sidebar>
	</nb-sidebar>
</nb-layout>
<gauzy-user-menu
	[user]="user"
	(close)="isOpen=false"
	*ngIf="isOpen"
></gauzy-user-menu>
