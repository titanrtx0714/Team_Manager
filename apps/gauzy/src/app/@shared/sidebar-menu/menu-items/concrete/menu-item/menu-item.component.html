<nb-accordion
	*ngxPermissionsOnly="item?.data?.permissionKeys"
	[ngClass]="state ? item?.class : item?.class + ' closed'"
>
	<nb-accordion-item
		(collapsedChange)="onCollapse($event)"
		[ngClass]="{ 'opened' : selected }"
	>
		<nb-accordion-item-header
			[ngClass]="{ 'collapsed' : onCollapse }"
			(click)="redirectTo()"
		>
			<i [class]="item?.icon"></i
			><span *ngIf="state">{{ item?.title }}</span>
		</nb-accordion-item-header>
		<nb-accordion-item-body
			[ngClass]="{ 'item-collapsed' : state }"
			*ngIf="item?.children?.length > 0"
		>
			<ng-container
				*ngFor="let subItem of item.children; trackBy: subItem?.title"
			>
				<ga-children-menu-item
					*ngIf="!item?.hidden"
					[item]="subItem"
					[parent]="item"
					[collapse]="state"
					[selected]="subItem === selectedChildren && selected"
					(focusItemChange)="focusOn($event)"
				></ga-children-menu-item>
			</ng-container>
		</nb-accordion-item-body>
	</nb-accordion-item>
</nb-accordion>
