<nb-layout>
	<nb-layout-column class="top-space">
		<div class="row full-height">
			<div class="col-5 full-height no-padding">
				<nb-card class="full-height">
					<nb-card-body>
						<div class="row">
							<div class="col-3">
								<nb-icon
									class="start-button"
									icon="play-circle"
									*ngIf="!start"
									(click)="toggleStart()"
								>
								</nb-icon>
								<nb-icon
									class="start-button"
									icon="stop-circle-outline"
									*ngIf="start"
									(click)="toggleStart()"
								>
								</nb-icon>
							</div>
							<div class="col-6 timer-box">
								<div class="timer-container">
									{{ timeRun.hours }}: {{ timeRun.minute }}:{{
										timeRun.second
									}}
								</div>
							</div>
							<div class="col-12 form-group tp-padding">
								<div class="row">
									<div class="col-12">
										<div class="row">
											<div class="col-6">
												<nb-checkbox
													[checked]="aw"
													(change)="setAW($event)"
													>Activiwatch</nb-checkbox
												>
											</div>
											<div class="col-6">
												<p
													*ngIf="loadingAw"
													[nbSpinner]="loadingAw"
													nbSpinnerStatus="info"
												></p>
												<nb-icon
													*ngIf="
														awCheck && !loadingAw
													"
													[icon]="iconAw"
													[status]="statusIcon"
												>
												</nb-icon>
											</div>
										</div>
									</div>

									<div class="col-12">
										<nb-checkbox [disabled]="true"
											>Wakatime</nb-checkbox
										>
									</div>
								</div>
							</div>
							<div class="col-12">
								<div class="row">
									<div class="col-11 center-text">
										<h5>
											{{userOrganization.name ? userOrganization.name : 'UNKNOWN'}}
										</h5>
									</div>
									<div class="col-11 center-text">
										<h6>Total Worked Today {{todayDuration.hours}}:{{todayDuration.minutes}}</h6>
									</div>
								</div>
							</div>
							<div class="col-12">
								<div class="row">
									<div class="col-12 center-text">
										<nb-card>
											<nb-card-header>
												<div class="row">
													<div class="col-6 screen-capture-label-left"><span>Last screen capture</span></div>
													<div *ngIf="lastScreenCapture.textTime" class="col-6 screen-capture-label-right"><span>{{lastScreenCapture.textTime}}</span></div>
												</div>
											</nb-card-header>
											<nb-card-body>
												<img 
													class="screen-capture-img"
													*ngIf="lastScreenCapture.fullUrl"
													[src]="lastScreenCapture.fullUrl"
												>
												<nb-icon
													*ngIf="!lastScreenCapture.fullUrl"
													icon="image-outline"
												>
												</nb-icon>
											</nb-card-body>
										</nb-card>
									</div>
								</div>
							</div>
						</div>
					</nb-card-body>
				</nb-card>
			</div>
			<div class="col-7 full-height no-padding">
				<nb-card class="full-height">
					<nb-card-body>
						<div class="row">
							<div class="col-12">
								<h5>TASK</h5>
							</div>
							<!-- <div class="col-12">
								<h6>Electron APP</h6>
							</div> -->
							<div class="col-12 form-group" #selectRef>
								<nb-select
									placeholder="Project"
									[(ngModel)]="projectSelect"
									(ngModelChange)="setProject($event)"
									[status]="
										errors.project ? 'danger' : 'basic'
									"
								>
									<nb-option
										[value]="project.id"
										*ngFor="let project of projects"
										>{{ project.name }}</nb-option
									>
								</nb-select>
							</div>
							<div class="col-12 form-group">
								<nb-select
									placeholder="Task"
									[(ngModel)]="taskSelect"
									(ngModelChange)="setTask($event)"
									[status]="errors.task ? 'danger' : 'basic'"
								>
									<nb-option
										[value]="task.id"
										*ngFor="let task of tasks"
										>{{ task.title }}</nb-option
									>
								</nb-select>
							</div>
							<div class="col-12">
								<p>Work ON:</p>
								<textarea
									nbInput
									fullWidth
									placeholder="Note"
									status="basic"
									[(ngModel)]="note"
									[status]="errors.note ? 'danger' : 'basic'"
								></textarea>
							</div>
						</div>
					</nb-card-body>
				</nb-card>
			</div>
		</div>
	</nb-layout-column>
</nb-layout>
